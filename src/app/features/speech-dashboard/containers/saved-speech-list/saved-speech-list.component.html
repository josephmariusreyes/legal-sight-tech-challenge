<div class="speech-dashboard min-vh-100 bg-white position-relative">
  <app-speech-list-header [isMobileMenuOpen]="isMobileMenuOpen" (toggleMobileMenu)="toggleMobileMenu()">
  </app-speech-list-header>

  <!-- Mobile menu overlay -->
  <div class="mobile-menu-overlay position-fixed w-100 h-100" [class.active]="isMobileMenuOpen"
    (click)="closeMobileMenu()"></div>

  <div class="main-content d-flex flex-fill overflow-hidden">

    @if (!isNewSpeech) {
      <div class="sidebar border-end bg-white" [class.mobile-open]="isMobileMenuOpen">
        <div class="search-section p-3 border-bottom bg-white mb-1">
          <input type="text" class="form-control mb-2" placeholder="Search all Speeches..." [(ngModel)]="searchQuery"
            (keyup.enter)="onSearch()" (input)="onSearchInputChange()">
        </div>
        <div class="speech-list py-2">
          @for (speech of filteredSpeeches; track speech.id) {
          <a [routerLink]="['/speech-dashboard/saved-speeches', speech.id]"
            class="d-block text-decoration-none text-dark speech-item p-3 border-bottom position-relative"
            [class.selected]="selectedSpeech?.id === speech.id" (click)="onViewSpeech()">
            <div class="speech-title fw-medium text-dark mb-1">
              {{ speech.title || 'Speech ' + speech.id }}
            </div>
            <div class="speech-date text-muted">
              {{ speech.createdDate | date:'short' }}
            </div>
          </a>
          }
          @empty {
          <div class="no-speeches p-4 text-center">
            <p class="text-muted fst-italic mb-0">No speeches found</p>
          </div>
          }
        </div>
      </div>
    }

    <div class="content-area flex-fill d-flex flex-column overflow-hidden">
      <app-selected-speech 
        [speechFormGroup]="speechFormGroup"
        (addKeyword)="onAddKeyword()"
        (removeKeyword)="onRemoveKeyword($event)"
      ></app-selected-speech>
      <app-saved-speech-actions
        [isNewSpeech]="isNewSpeech"
        (delete)="onDeleteCurrentSpeech()"
        (save)="onSaveCurrentSpeech()"
        (share)="onShareCurrentSpeech()"
      ></app-saved-speech-actions>
    </div>
    
  </div>

  <!-- Share Speech Dialog -->
  <app-share-speech-dialog
    [(visible)]="showShareDialog"
    [selectedSpeech]="selectedSpeech"
    (speechUpdated)="onSpeechUpdated($event)">
  </app-share-speech-dialog>
</div>